(function(e){function t(t){for(var s,c,i=t[0],l=t[1],o=t[2],p=0,d=[];p<i.length;p++)c=i[p],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&d.push(a[c][0]),a[c]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);u&&u(t);while(d.length)d.shift()();return r.push.apply(r,o||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],s=!0,i=1;i<n.length;i++){var l=n[i];0!==a[l]&&(s=!1)}s&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var s={},a={app:0},r=[];function c(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=s,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)c.d(n,s,function(t){return e[t]}.bind(null,s));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/vue-sequencer-polyend/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var o=0;o<i.length;o++)t(i[o]);var u=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0f77":function(e,t,n){"use strict";var s=n("9347"),a=n.n(s);a.a},"16cf":function(e,t,n){},"2cf5":function(e,t,n){},"3ce5":function(e,t,n){"use strict";var s=n("9a79"),a=n.n(s);a.a},"3e86":function(e,t,n){},"47ba":function(e,t,n){"use strict";var s=n("2cf5"),a=n.n(s);a.a},"4a9c2":function(e,t,n){"use strict";var s=n("cf38"),a=n.n(s);a.a},"4dfa":function(e,t,n){"use strict";var s=n("fedf"),a=n.n(s);a.a},"5a8b":function(e,t,n){},6975:function(e,t,n){},8643:function(e,t,n){},"89e4":function(e,t,n){},"8fe5":function(e,t,n){"use strict";var s=n("89e4"),a=n.n(s);a.a},9347:function(e,t,n){},"9a79":function(e,t,n){},a620:function(e,t,n){"use strict";var s=n("6975"),a=n.n(s);a.a},bf68:function(e,t,n){"use strict";var s=n("8643"),a=n.n(s);a.a},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"main"}},[e._m(0),n("Tracker")],1)},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hero__base"},[n("h1",[e._v("Step Sequencer")]),n("p",[e._v(" Small sequencer with 4 tracks and 16 steps inspired by the "),n("a",{attrs:{href:"https://polyend.com/tracker/",target:"_blank"}},[n("span",{staticClass:"hero__highlight"},[e._v("Polyend Tracker")])]),e._v(" sequence mode with 3 selectable instruments and frequency change , done with "),n("span",{staticClass:"hero__highlight"},[e._v("Vue")]),e._v(" + "),n("a",{attrs:{href:"http://tonejs.github.io/",target:"_blank"}},[n("span",{staticClass:"hero__highlight"},[e._v("Tone.js")])])])])}],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tracker__base"},[n("div",{staticClass:"tracker__wrapper"},[n("Controls"),n("Patterns")],1)])},i=[],l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"controls__base"},[n("button",{staticClass:"controls__playPause",on:{click:e.togglePlay}},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24"}},[n("path",{attrs:{d:"M8 5v14l11-7z",fill:e.isPlaying?"none":"#458B85"}}),n("path",{attrs:{d:"M6 6h12v12H6z",fill:e.isPlaying?"#458B85":"none"}})])]),n("Slider",{attrs:{method:"volume",label:"Volume",min:-60,max:0,value:e.volume,interval:.1,showValue:!1}}),n("Slider",{attrs:{method:"tempo",label:"Tempo",valueLabel:"bpm",min:60,max:240,value:e.tempo}})],1)},o=[],u=(n("96cf"),n("1da1")),p=n("5530"),d=n("5e54"),f=n("2f62"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"slider__wrapper"},[n("div",{staticClass:"slider__labels"},[n("span",[e._v(e._s(e.label))]),e.showValue?n("span",[e._v(e._s(e.sliderValue)+" "+e._s(e.valueLabel))]):e._e()]),n("vue-slider",{staticClass:"slider__slider",attrs:{"drag-on-click":!0,useKeyboard:!0,tooltip:"none",min:e.min,max:e.max,interval:e.interval,"process-style":{backgroundColor:"#458B85"}},scopedSlots:e._u([{key:"dot",fn:function(e){e.value;var t=e.focus;return[n("div",{class:["slider__dot",{focus:t}]})]}}]),model:{value:e.sliderValue,callback:function(t){e.sliderValue=t},expression:"sliderValue"}})],1)},h=[],v=(n("a9e3"),n("4971")),b=n.n(v),k=(n("3e39"),{name:"Slider",computed:{sliderValue:{get:function(){return this.value},set:function(e){this.$store.commit("modifyTransportParam",{transportParam:this.method,value:e})}}},components:{VueSlider:b.a},props:{label:String,valueLabel:String,min:Number,max:Number,mutation:Function,value:Number,method:String,interval:Number,showValue:{default:!0,type:Boolean}}}),y=k,_=(n("3ce5"),n("2877")),S=Object(_["a"])(y,m,h,!1,null,null,null),g=S.exports,w=s["default"].extend({name:"Controls",components:{Slider:g},computed:Object(p["a"])({},Object(f["b"])(["isPlaying","tempo","volume"])),watch:{tempo:function(e){d["g"].bpm.value=e},volume:function(e){d["a"].volume.value=e}},methods:{togglePlay:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["h"]();case 2:if(e.$store.commit("togglePlay"),!e.isPlaying){t.next=6;break}return d["g"].start("+0.1"),t.abrupt("return");case 6:d["g"].stop();case 7:case"end":return t.stop()}}),t)})))()}}}),x=w,C=(n("dbbc"),Object(_["a"])(x,l,o,!1,null,null,null)),P=C.exports,O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pattern__base"},[n("steps-display"),n("div",{staticClass:"tracks__wrapper"},e._l(e.tracks,(function(e){return n("Track",{key:"track-"+e.id,attrs:{track:e}})})),1),n("steps-display")],1)},j=[],A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"track__base"},[n("track-controls",{attrs:{track:e.track.id,instruments:e.instruments}}),n("ul",{staticClass:"steps__wrapper"},e._l(e.track.steps,(function(t,s){return n("Step",{key:"track-"+e.track.id+"-step-"+s,attrs:{step:t,stepN:s,track:e.track.id,instruments:e.instruments}})})),1)],1)},T=[],$=(n("7db0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{class:{step__base:!0,animate:e.step.animate}},[n("v-select",{staticClass:"step__keySelect",attrs:{options:e.semiTonesArray,clearable:!1,searchable:!1,disabled:"snare"===e.instrument},model:{value:e.key,callback:function(t){e.key=t},expression:"key"}}),n("v-select",{staticClass:"step__instrumentSelect",attrs:{label:"name",options:e.instruments,clearable:!1,searchable:!1,reduce:function(e){return e.id}},model:{value:e.instrument,callback:function(t){e.instrument=t},expression:"instrument"}}),n("label",{staticClass:"step__selectCheckboxLabel"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.isSelected,expression:"isSelected"}],staticClass:"step__selectCheckbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isSelected)?e._i(e.isSelected,null)>-1:e.isSelected},on:{change:function(t){var n=e.isSelected,s=t.target,a=!!s.checked;if(Array.isArray(n)){var r=null,c=e._i(n,r);s.checked?c<0&&(e.isSelected=n.concat([r])):c>-1&&(e.isSelected=n.slice(0,c).concat(n.slice(c+1)))}else e.isSelected=a}}}),n("span",{staticClass:"step__selectCheckboxMark"})])],1)}),N=[],q=n("4a7a"),E=n.n(q),V=s["default"].extend({name:"Step",components:{vSelect:E.a},computed:Object(p["a"])({},Object(f["b"])(["semiTonesArray"]),{isSelected:{get:function(){return this.step.selected},set:function(e){e?this.addStep():this.modifyStep("selected",!1)}},key:{get:function(){return this.step.key},set:function(e){this.modifyStep("key",e)}},instrument:{get:function(){return this.step.instrument},set:function(e){this.modifyStep("instrument",e)}}}),methods:{modifyStep:function(e,t){this.$store.dispatch("modifyStep",{step:this.stepN,track:this.track,action:e,value:t})},addStep:function(){this.$store.commit("addStep",{step:this.stepN,track:this.track,stepInfo:{selected:!0,animate:!1,key:this.key,instrument:this.instrument}})}},props:{step:[String,Object],stepN:Number,track:Number,instruments:Array}}),D=V,M=(n("8fe5"),Object(_["a"])(D,$,N,!1,null,null,null)),B=M.exports,I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"track__controls"},[n("v-select",{staticClass:"step__keySelect",attrs:{options:e.semiTonesArray,clearable:!1,searchable:!1},on:{input:e.selectAllKeys},model:{value:e.key,callback:function(t){e.key=t},expression:"key"}}),n("v-select",{staticClass:"step__instrumentSelect",attrs:{label:"name",options:e.instruments,clearable:!1,searchable:!1,reduce:function(e){return e.id}},on:{input:e.selectAllInstruments},model:{value:e.instrument,callback:function(t){e.instrument=t},expression:"instrument"}}),n("label",{staticClass:"step__selectCheckboxLabel"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.allSelected,expression:"allSelected"}],staticClass:"step__selectCheckbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.allSelected)?e._i(e.allSelected,null)>-1:e.allSelected},on:{change:[function(t){var n=e.allSelected,s=t.target,a=!!s.checked;if(Array.isArray(n)){var r=null,c=e._i(n,r);s.checked?c<0&&(e.allSelected=n.concat([r])):c>-1&&(e.allSelected=n.slice(0,c).concat(n.slice(c+1)))}else e.allSelected=a},e.toggleSteps]}}),n("span",{staticClass:"step__selectCheckboxMark"})])],1)},L=[],K={name:"TrackControls",components:{vSelect:E.a},data:function(){return{allSelected:!1,key:"C3",instrument:"kick"}},computed:Object(p["a"])({},Object(f["b"])(["semiTonesArray"])),methods:{selectAllKeys:function(){this.modifyParams({key:this.key})},selectAllInstruments:function(){this.modifyParams({instrument:this.instrument})},modifyParams:function(e){this.$store.dispatch("modifySeveralSteps",{track:this.track,params:e})},toggleSteps:function(){this.allSelected?this.$store.commit("selectAllSteps",this.track):this.modifyParams({selected:!1,animate:!1})}},props:{track:Number,instruments:Array}},R=K,z=(n("4dfa"),Object(_["a"])(R,I,L,!1,null,null,null)),F=z.exports,J=s["default"].extend({name:"Track",components:{Step:B,TrackControls:F},data:function(){return{nOfSteps:16,instruments:[{id:"kick",name:"Kick",allowsNotes:!0,synth:new d["c"]({octaves:10}).toDestination()},{id:"snare",name:"Snare",allowsNotes:!1,synth:(new d["e"]).toDestination()},{id:"bass",name:"Bass",allowsNotes:!0,synth:new d["d"]({oscillator:{type:"square"},envelope:{attack:.1}}).toDestination()}],sequence:new d["f"]}},methods:{playSequence:function(e,t){var n=this;if(this.track.steps[t].selected){var s=this.track.steps[t],a=s.key,r=s.instrument,c=this.instruments.find((function(e){return e.id===r}));if("undefined"===typeof c)return;c.allowsNotes?c.synth.triggerAttackRelease(a,"16n",e):c.synth.triggerAttack(e),d["b"].schedule((function(){n.animate(!0,t),setTimeout((function(){n.animate(!1,t)}),500)}),e)}},animate:function(e,t){this.$store.dispatch("modifyStep",{step:t,track:this.track.id,action:"animate",value:e})}},computed:Object(p["a"])({},Object(f["b"])(["isPlaying"])),watch:{isPlaying:function(e){e?this.sequence.start(0):this.sequence.stop()}},created:function(){this.sequence=new d["f"](this.playSequence,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],"16n")},props:{track:Object}}),G=J,H=(n("a620"),Object(_["a"])(G,A,T,!1,null,null,null)),Q=H.exports,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"stepsDisplay__wrapper"},[n("ol",{staticClass:"stepsDisplay__display"},e._l(16,(function(t){return n("li",{key:"step-display-"+t,staticClass:"stepsDisplay__item"},[e._v(e._s(t))])})),0)])},W=[],X={name:"StepsDisplay"},Y=X,Z=(n("47ba"),Object(_["a"])(Y,U,W,!1,null,null,null)),ee=Z.exports,te=s["default"].extend({name:"Patterns",components:{Track:Q,StepsDisplay:ee},computed:Object(p["a"])({},Object(f["b"])(["tracks"]))}),ne=te,se=(n("4a9c2"),Object(_["a"])(ne,O,j,!1,null,null,null)),ae=se.exports,re=(n("5a8b"),n("3e86"),s["default"].extend({name:"Tracker",components:{Controls:P,Patterns:ae}})),ce=re,ie=(n("0f77"),Object(_["a"])(ce,c,i,!1,null,null,null)),le=ie.exports,oe=s["default"].extend({name:"App",components:{Tracker:le}}),ue=oe,pe=(n("bf68"),Object(_["a"])(ue,a,r,!1,null,"7f0d35e9",null)),de=pe.exports,fe=(n("99af"),function(){for(var e=[],t=["C","D","E","F","G","A","B"],n=3,s=0;s<n;s+=1)for(var a=0,r=t.length;a<r;a+=1)e.push("".concat(t[a]).concat(s+1),"".concat(t[a],"#").concat(s+1));return e}),me={isPlaying:!1,semiTonesArray:fe(),volume:0,tempo:120},he={togglePlay:function(e){e.isPlaying=!e.isPlaying},modifyTransportParam:function(e,t){var n=t.transportParam,s=t.value;e[n]=s}},ve={isPlaying:function(e){return e.isPlaying},semiTonesArray:function(e){return e.semiTonesArray},volume:function(e){return e.volume},tempo:function(e){return e.tempo}},be={state:me,mutations:he,getters:ve},ke=be,ye=(n("cb29"),n("d81d"),n("ade3")),_e=n("2909"),Se=function(){return Array(16).fill({selected:!1,animate:!1,instrument:"kick",key:"C3"})},ge=function(){return Object(_e["a"])(Array(4)).map((function(e,t){return{id:t,steps:Se()}}))},we={loadedPattern:0,patterns:[{id:0,tracks:ge()}]},xe={modifyStep:function(e,t){var n=e.commit,s=Object.assign({},t),a=we.patterns,r=we.loadedPattern,c=s.track,i=s.step,l=a[r].tracks[c].steps[i];n("modifyStep",Object(p["a"])({},s,{stepInfo:l}))},modifySeveralSteps:function(e,t){var n=e.commit,s=e.state,a=Object.assign({},t),r=s.patterns,c=s.loadedPattern,i=a.track,l=a.params,o=r[c].tracks[i].steps,u=o.map((function(e){return Object(p["a"])({},e,{},l)}));n("modifySeveralSteps",Object(p["a"])({},a,{newSteps:u}))}},Ce={modifyStep:function(e,t){var n=e.patterns,a=e.loadedPattern,r=t.track,c=t.step,i=t.action,l=t.value,o=t.stepInfo;s["default"].set(n[a].tracks[r].steps,c,Object(p["a"])({},o,Object(ye["a"])({},i,l)))},addStep:function(e,t){var n=e.patterns,a=e.loadedPattern,r=t.track,c=t.step,i=t.stepInfo;s["default"].set(n[a].tracks[r].steps,c,i)},modifySeveralSteps:function(e,t){var n=e.patterns,s=e.loadedPattern,a=t.track,r=t.newSteps;n[s].tracks[a].steps=r},selectAllSteps:function(e,t){var n=e.patterns,s=e.loadedPattern,a=n[s].tracks[t].steps;n[s].tracks[t].steps=a.map((function(e){var t=e.selected,n=e.key,s=e.instrument;if(!t){var a=n||"C3",r=s||"kick";return{selected:!0,animate:!1,key:a,instrument:r}}return e}))}},Pe={tracks:function(e){return e.patterns[e.loadedPattern].tracks}},Oe={state:we,actions:xe,mutations:Ce,getters:Pe},je=Oe;s["default"].use(f["a"]);var Ae=new f["a"].Store({strict:!0,modules:{tracker:ke,patterns:je}});s["default"].config.productionTip=!1,new s["default"]({store:Ae,render:function(e){return e(de)}}).$mount("#app")},cf38:function(e,t,n){},dbbc:function(e,t,n){"use strict";var s=n("16cf"),a=n.n(s);a.a},fedf:function(e,t,n){}});
//# sourceMappingURL=app.d9982d49.js.map